<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="YEcXEB8SDXy-ZzorhMOtipKg6gA8VH4AKy19RNxG6d8" />
    <title>Temporary Email</title>
</head>
<body>
    <h1>Free Temporary Email</h1>
    
    <button onclick="generateEmail()">Generate Email</button>
    <p>Email: <span id="email"></span></p>
    <input type="text" id="email-box" readonly>
    <p>Password: <span id="password"></span></p>
    
    <button onclick="checkInbox()">Check Inbox</button>
    <pre id="messages"></pre>

    <script>
        let accountId = "";
        let token = "";

        async function generateEmail() {
            let domain = "mail.tm";
            let username = Math.random().toString(36).substring(7) + "@" + domain;
            let password = Math.random().toString(36).substring(7);

            let registerResponse = await fetch("https://api.mail.tm/accounts", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ address: username, password: password })
            });

            if (registerResponse.ok) {
                let loginResponse = await fetch("https://api.mail.tm/token", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ address: username, password: password })
                });

                let loginData = await loginResponse.json();
                token = loginData.token;
                accountId = loginData.id;

                document.getElementById("email").innerText = username;
                document.getElementById("email-box").value = username;
                document.getElementById("password").innerText = password;
            } else {
                alert("Error generating email. Try again.");
            }
        }

        async function checkInbox() {
            if (!token) {
                alert("Generate an email first!");
                return;
            }

            let inboxResponse = await fetch("https://api.mail.tm/messages", {
                headers: { "Authorization": "Bearer " + token }
            });

            let inboxData = await inboxResponse.json();
            document.getElementById("messages").innerText = JSON.stringify(inboxData, null, 2);
        }
    </script>
</body>
</html>
